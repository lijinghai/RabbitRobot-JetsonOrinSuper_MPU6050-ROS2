# Jetsonä¸ŠMPU6050æ¥å…¥ROS2

# ä¸€ã€Jetson Orin Nano Super (8GB) + MPU6050 é›†æˆ ROS2 å®ç° IMU æ•°æ®å‘å¸ƒ

>  [!tip]
>
>  ### ä¸ºä»€ä¹ˆéœ€è¦ **MPU6050**
>
>  # å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ **D435ï¼ˆé D435iï¼‰**ï¼Œå®ƒæœ¬èº«ä¸å¸¦ IMUã€‚
>
>  åœ¨ SLAM ä¸­ï¼ŒIMU æ•°æ®ï¼ˆåŠ é€Ÿåº¦ + è§’é€Ÿåº¦ï¼‰å¯ä»¥å¸®åŠ©ï¼š
>
>  1. **æé«˜ä½å§¿ä¼°è®¡çš„ç¨³å®šæ€§** â€”â€” åœ¨ç›¸æœºè¿åŠ¨æ¨¡ç³Šã€ç‰¹å¾ç¼ºå¤±æ—¶æä¾›çŸ­æ—¶è¿åŠ¨çº¦æŸã€‚
>  2. **å®ç°è§†è§‰-æƒ¯æ€§èåˆå»ºå›¾** â€”â€” RTAB-Map æˆ– VIO ç®—æ³•ï¼ˆå¦‚ VINS-Fusionã€FAST-LIO2ï¼‰å¯ä»¥èåˆ IMU æå‡ç²¾åº¦ã€‚
>  3. **å¯åŠ¨é˜¶æ®µæ›´å¿«æ”¶æ•›** â€”â€” IMU å¯è¾…åŠ©åˆå§‹åŒ–æ–¹å‘ä¸åŠ é€Ÿåº¦ä¼°è®¡ã€‚
>
>  æ‰€ä»¥æˆ‘ç”¨ **MPU6050ï¼ˆé€šè¿‡ IÂ²C æ¥ Jetsonï¼‰** æ¥å¼¥è¡¥ D435 ç¼ºå°‘ IMU çš„åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸åˆç†çš„ç³»ç»Ÿè®¾è®¡ã€‚

## 3.1 Jetson Orin Nano Super (8GB) å¼•è„šå›¾ä»‹ç»

```bash
sudo /opt/nvidia/jetson-io/jetson-io.py
```

```bash
 =================== Jetson Expansion Header Tool ===================
 |                                                                    |
 |                                                                    |
 |                      3.3V (  1) .. (  2) 5V                        |
 |                      i2c8 (  3) .. (  4) 5V                        |
 |                      i2c8 (  5) .. (  6) GND                       |
 |                    unused (  7) .. (  8) uarta                     |
 |                       GND (  9) .. ( 10) uarta                     |
 |                    unused ( 11) .. ( 12) unused                    |
 |                    unused ( 13) .. ( 14) GND                       |
 |                    unused ( 15) .. ( 16) unused                    |
 |                      3.3V ( 17) .. ( 18) unused                    |
 |                    unused ( 19) .. ( 20) GND                       |
 |                    unused ( 21) .. ( 22) unused                    |
 |                    unused ( 23) .. ( 24) unused                    |
 |                       GND ( 25) .. ( 26) unused                    |
 |                      i2c2 ( 27) .. ( 28) i2c2                      |
 |                    unused ( 29) .. ( 30) GND                       |
 |                    unused ( 31) .. ( 32) unused                    |
 |                    unused ( 33) .. ( 34) GND                       |
 |                    unused ( 35) .. ( 36) unused                    |
 |                    unused ( 37) .. ( 38) unused                    |
 |                       GND ( 39) .. ( 40) unused                    |
 |                                                                    |
 |                                                                    |
 |                        Jetson 40pin Header:                        |
 |                                                                    |
 |                 Configure for compatible hardware                  |
 |                   Configure header pins manually                   |
 |                                Back                                |
 |                                                                    |
 |====================================================================|

```



![image-20251021221519687](./README.assets/image-20251021221519687.png)

![image-20251021221609232](./README.assets/image-20251021221609232.png)

![image-20251021221627699](./README.assets/image-20251021221627699.png)

![image-20251021221749625](./README.assets/image-20251021221749625.png)

## 3.2 MPU6050çš„ç‰¹ç‚¹å’ŒåŠŸèƒ½

> [!note]
>
> ## 1.1 å…­è½´ä¼ æ„Ÿå™¨
>
> MPU6050é›†æˆäº†ä¸‰è½´åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨å’Œä¸‰è½´é™€èºä»ªï¼Œå…­è½´ä¼ æ„Ÿå™¨çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºç»“åˆäº†åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªçš„æµ‹é‡ç»“æœï¼Œå¯ä»¥æä¾›æ›´å…¨é¢å’Œå‡†ç¡®çš„ç‰©ä½“è¿åŠ¨å’Œå§¿æ€ä¿¡æ¯ã€‚é€šè¿‡ç»¼åˆåŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªçš„æ•°æ®ï¼Œå…­è½´ä¼ æ„Ÿå™¨å¯ä»¥ä¼°è®¡ç‰©ä½“çš„å§¿æ€ï¼ˆå¦‚æ¬§æ‹‰è§’æˆ–å››å…ƒæ•°ï¼‰ï¼Œä»¥åŠç‰©ä½“åœ¨ä¸‰ä¸ªç©ºé—´æ–¹å‘ä¸Šçš„åŠ é€Ÿåº¦å’Œè§’é€Ÿåº¦ã€‚
>
> ## 1.2 æ•°å­—è¿åŠ¨å¤„ç†å™¨
>
> MPU6050å†…ç½®çš„æ•°å­—è¿åŠ¨å¤„ç†å™¨å¯ä»¥è¿›è¡Œå¤æ‚çš„è¿åŠ¨å¤„ç†å’Œæ•°æ®å¤„ç†ï¼ŒåŒ…æ‹¬ä¼ æ„Ÿå™¨æ•°æ®çš„æ»¤æ³¢ã€å™ªå£°æ¶ˆé™¤ã€è¿åŠ¨èåˆç®—æ³•ç­‰ã€‚å®ƒé€šè¿‡å¤„ç†å™¨å†…éƒ¨çš„ç®—æ³•ï¼Œæä¾›äº†æ–¹ä¾¿å¿«æ·çš„å§¿æ€è§£ç®—ã€‚
>
> ## 1.3 I2Cé€šä¿¡æ¥å£
>
> MPU6050ä¼ æ„Ÿå™¨é€šä¿¡åè®®å¯ä»¥é€‰æ‹©ä½¿ç”¨I2Cæˆ–SPIã€‚ I2Cæ˜¯æœ€å¸¸ç”¨çš„é€šä¿¡åè®®ï¼Œé€‚ç”¨äºå¤§å¤šæ•°æƒ…å†µä¸‹ã€‚SPIæ˜¯ä¸€ç§é«˜é€Ÿä¸²è¡Œé€šä¿¡åè®®ï¼Œæ›´åŠ é€‚ç”¨äºæ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åº”ç”¨åœºæ™¯ã€‚
>
> æ”¯æŒçš„I2Cé€šä¿¡æ¨¡å¼ä¸­ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªä¿¡å·çº¿SCLï¼ˆä¸²è¡Œæ—¶é’Ÿçº¿ï¼‰å’ŒSDAï¼ˆä¸²è¡Œæ•°æ®çº¿ï¼‰ã€‚é€šè¿‡I2Cé€šä¿¡ï¼Œå¯ä»¥ä¸MPU6050è¿›è¡Œæ•°æ®çš„è¯»å–å’Œå†™å…¥ï¼Œå¦ä¸€ç¯‡åšå®¢æœ‰è®²åˆ°ã€‚[I2Cï¼ˆIICï¼‰é€šä¿¡åè®®è¯¦è§£ä¸åº”ç”¨](https://blog.csdn.net/Goforyouqp/article/details/131515367?spm=1001.2014.3001.5502)
>
> å¦‚æœé€‰æ‹©ä½¿ç”¨SPIé€šä¿¡åè®®ï¼Œå¯ä»¥å‚è€ƒMPU6050çš„æ•°æ®æ‰‹å†Œä»¥åŠæ‚¨æ‰€ä½¿ç”¨çš„STM32çš„æ–‡æ¡£ï¼Œé…ç½®å’Œè¿æ¥SPIæ€»çº¿ï¼Œè®¾ç½®é€šä¿¡å‚æ•°ï¼Œå¹¶ä½¿ç”¨SPIåè®®ä¸MPU6050è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œæˆ‘æ˜¯å¾ˆå°‘ä½¿ç”¨SPIé€šä¿¡çš„ï¼Œè¯¦ç»†çš„é€šä¿¡åè®®å¦ä¸€ç¯‡åšå®¢ä¹Ÿæœ‰è®²åˆ°ï¼Œæƒ³äº†è§£çš„ä¹Ÿå¯ä»¥å»çœ‹ä¸€ä¸‹ã€‚[äº†è§£SPIé€šä¿¡ï¼šä¸²è¡Œå¤–è®¾æ¥å£çš„åŸºæœ¬å·¥ä½œåŸç†ï¼Œ51ã€stm32å®ç°SPI](https://blog.csdn.net/Goforyouqp/article/details/131511080?spm=1001.2014.3001.5502)
>
> ## 1.4 é«˜ç²¾åº¦å’Œä½åŠŸè€—
>
> ä¸ºäº†å®ç°MPU6050çš„é«˜ç²¾åº¦ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¼ æ„Ÿå™¨æ ¡å‡†ã€æ•°æ®æ»¤æ³¢ã€æ¸©åº¦è¡¥å¿ã€æ•°æ®å¤„ç†å’Œç®—æ³•ä¼˜åŒ–ï¼Œä»¥åŠç³»ç»Ÿè°ƒä¼˜ç­‰æ­¥éª¤ã€‚é€šè¿‡è¿™äº›æªæ–½ï¼Œå¯ä»¥æé«˜MPU6050çš„æµ‹é‡ç²¾åº¦å’Œç¨³å®šæ€§ï¼Œç¡®ä¿è·å¾—å‡†ç¡®å¯é çš„è¿åŠ¨æµ‹é‡å’Œå§¿æ€ä¼°è®¡ç»“æœï¼ŒåŒæ—¶é€šè¿‡æ™ºèƒ½åŠŸè€—æ§åˆ¶æ¥å»¶é•¿ç”µæ± å¯¿å‘½ã€‚
>
> ## 1.5 é›†æˆROS2
>
> å‚è€ƒç½‘ç«™ï¼š
>
> -  https://github.com/hiwad-aziz/ros2_mpu6050_driverï¼Œ
> -  https://github.com/kimsniper/ros2_mpu6050?tab=readme-ov-file

|                            å®ç‰©å›¾                            |                            å¼•è„šå›¾                            |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| ![image-20251012221332875](./README.assets/image-20251012221332875.png) | ![image-20251012221556639](./README.assets/image-20251012221556639.png) |
|                **GY-521æ¨¡å—ä¸Šå„ä¸ªå¼•è„šçš„ä½œç”¨**                |                            è¿æ¥å›¾                            |
| <img src="./README.assets/image-20251012221623294.png" alt="image-20251012221623294" style="zoom:150%;" /> | <img src="./README.assets/image-20251021222957767.png" alt="image-20251021222957767" style="zoom:50%;" /> |

## 3.3 Jetson ä¸MPU6050æ¥çº¿å›¾

```bash
VCC ---æ¥Nanoå¼•è„šç¬¬17è„š
GND ---æ¥Nano å¼•è„šç¬¬25è„š
SCL ---æ¥Nano å¼•è„šç¬¬5è„š(GEN2_I2C_SCL)
SDA ---æ¥Nano å¼•è„šç¬¬3è„š(GEN2_I2C_SDA)
```

|                          ä»¿çœŸæ¥çº¿å›¾                          | å®ç‰©æ¥çº¿å›¾                                                   |
| :----------------------------------------------------------: | ------------------------------------------------------------ |
| ![image-20251021223023359](./README.assets/image-20251021223023359.png) | <img src="./README.assets/image-20251021223209183.png" alt="image-20251021223209183" style="zoom:150%;" /> |

å¼•è„š 3 å’Œ 5 ä½äº I2C æ€»çº¿ 7 ä¸Š

```bash
sudo i2cdetect -y -r 7
```

![image-20251021224118526](./README.assets/image-20251021224118526.png)

# äºŒã€åˆ›å»ºMPU6050 ROS2å·¥ä½œç©ºé—´

## 2.1 åˆ›å»ºç›®å½•

```bash
sudo mkdir ljh_mpu6050_ws/
sudo mkdir src
```

## 2.2 ä¸‹è½½æºç 

```bash
sudo apt update
sudo apt install libi2c-dev
cd src
git clone https://github.com/hiwad-aziz/ros2_mpu6050_driver.git
```

## 2.3 ç¼–è¯‘

```bash
colcon build --packages-select mpu6050driver
```

![image-20251022180031040](./README.assets/image-20251022180031040.png)

## 2.4 å¯åŠ¨ç»“ç‚¹

```bash
ros2 launch mpu6050driver mpu6050driver_launch.py
```

![image-20251022210641630](./README.assets/image-20251022210641630.png)

## 2.5 éªŒè¯ IMU æ•°æ®

```bash
ros2 topic list
# ç¡®è®¤æœ‰ /imu è¯é¢˜

ros2 topic echo /imu
# æŸ¥çœ‹å®æ—¶å‘å¸ƒçš„åŠ é€Ÿåº¦å’Œè§’é€Ÿåº¦æ•°æ®
```

![image-20251022210750692](./README.assets/image-20251022210750692.png)

## 2.6 åœ¨rqt_plotä¸­ç”»åŠ é€Ÿåº¦æˆ–è§’é€Ÿåº¦æ›²çº¿

```bash
ros2 run rqt_plot rqt_plot
```

åœ¨ç•Œé¢é‡Œæ·»åŠ è¯é¢˜

```bash
/imu/linear_acceleration/x
/imu/linear_acceleration/y
/imu/linear_acceleration/z
```

![image-20251022211238571](./README.assets/image-20251022211238571.png)

![image-20251022211211354](./README.assets/image-20251022211211354.png)

## 2.7 åœ¨Rviz2ä¸­éªŒè¯

> æ³¢åŠ¨mpu6050å¯ä»¥å®ç°Rviz2ä¸­åŒæ­¥å˜åŒ–

![ljh_mpu6050](./README.assets/ljh_mpu6050.gif)

---

## ğŸ“Š Star å†å²

[![Star History Chart](https://api.star-history.com/svg?repos=lijinghai/RabbitRobot-JetsonOrinSuper_MPU6050-ROS2&type=Date)](https://star-history.com/#lijinghai/RabbitRobot-JetsonOrinSuper_MPU6050-ROS2&Date)

---
<div align="center">

## ç®—ä¸ªæ–‡ç§‘ç”Ÿå§

**Made with â¤ï¸ for Robotics**

</div>





